# notification-distribution
**Notification Distribution** — это система автоматической рассылки уведомлений с возможностью просмотра сообщений в личном кабинете. Проект использует FastAPI, JWT для аутентификации, Redis для хранения токенов и RabbitMQ для асинхронной обработки уведомлений.

## Технологии
- **FastAPI** — асинхронный веб-фреймворк
- **SQLAlchemy** — ORM для работы с базой данных
- **JWT (JSON Web Token)** — аутентификация пользователей
- **Redis** — кеширование и хранение токенов
- **RabbitMQ** — брокер сообщений для асинхронной обработки уведомлений

## Установка и запуск

### 1. Установка зависимостей
```
pip install -r requirements.txt
```
### 2. Запуск Redis и RabbitMQ

Убедитесь, что Redis и RabbitMQ запущены. Если у вас установлен Docker, можно запустить их с помощью:
```
docker-compose up -d
```
### 3. Запуск приложения
```
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```
## API
### Авторизация пользователя /token
- Проверяет логин и пароль.
- Генерирует JWT-токен для аутентификации.
- Сохраняет токен в Redis (если доступен).
  
### Защищённый маршрут /protected
- Проверяет токен.
- Если токен действителен, предоставляет доступ.
  
### Выход из системы /logout
- Удаляет токен из Redis, разлогинивая пользователя.
  
### Регистрация /register
- Получает имя пользователя и пароль через Form.
- Проверяет, существует ли уже такой пользователь. Если нет, создаёт нового пользователя с зашифрованным паролем.
- Возвращает информацию о созданном пользователе.
- Если пользователь уже зарегистрирован, API вернёт ошибку 400.

### Отправка уведомлений /send_notifications
- Создаёт уведомление в базе данных.
- Отправляет сообщение в очередь RabbitMQ для последующей обработки.

### Получение уведомлений (/notifications)
- Проверяет JWT-токен пользователя.
- Извлекает список уведомлений для данного пользователя из базы данных.

### Переключение подписки на уведомления (/toggle-notifications)
- Проверяет токен пользователя.
- Включает или выключает получение уведомлений для пользователя.
